## Completed Features

### 1. Fix TypeScript errors in test files (code-quality)
- Added missing Badge properties (key, description, category, rarity, threshold) in prophecies/[id]/route.test.ts (lines 280, 473)
- Added missing ratingsOnResolved property to UserStats mock in users/[id]/route.test.ts (line 78)
- Fixed typo 'oderId' -> 'userId' in badge-service.test.ts (line 988)
- npx tsc --noEmit now passes without errors
- All 1751 tests passing

### 2. Remove unused variables (ESLint warnings) (code-quality)
- Removed unused BadgeWithEarnedAt interface in UserProfileModal.tsx (line 29)
- Removed unused type imports (ProphecySelect, RatingWithProphecySelect, RoundSelect) in badge-service.test.ts (lines 39-51)
- Removed 4 unused 'result' variables in badge-service.test.ts (lines 556, 647, 664, 980)
- Removed unused 'include' parameter in badge-service.test.ts (line 967)
- npm run lint shows 0 warnings
- All 1751 tests passing

### 3. Clean up debug console.log statements (code-quality)
- Created debug logger utility (src/lib/logger.ts) that only outputs when DEBUG=true
- Replaced console.log/error calls with debug.log/error in:
  - auth/login/verify/route.ts (passkey lookup debug logs)
  - useSSE.ts (client-side SSE connection logs)
  - event-emitter.ts (server-side SSE client tracking)
  - bot-rating-service.ts (bot rating debug logs)
- Removed placeholder console.log from forgot-password/page.tsx
- Updated tests in useSSE.test.ts to test actual behavior rather than logging implementation
- All 1751 tests passing

### 4. Textformatierung in Beschreibungen (feature)
- Created FormattedText component (src/components/FormattedText.tsx)
- Line handling:
  - Lines are trimmed (leading/trailing whitespace removed)
  - Multiple consecutive empty lines collapse to a single empty line
  - Leading/trailing empty lines are removed
- Inline formatting (within single lines only):
  - *text* → **bold**
  - _text_ → underlined
  - -text- → ~~strikethrough~~
- Bullet point lists:
  - Lines starting with "* " or "- " with odd marker count become bullet points
  - Consecutive bullets are grouped into a single list
- Integrated FormattedText in prophecy description display (RoundDetailClient.tsx)
- Created comprehensive test suite (39 tests) in FormattedText.test.tsx
- All 1795 tests passing

### 5. Prophezeiung Modal und Textarea vergrößern (ui)
- Increased textarea rows from 4 to 8 in both create and edit prophecy modals (RoundDetailClient.tsx lines 559-566 and 641-648)
- Changed modal size from "lg" to "xl" for both create and edit prophecy modals (lines 545 and 627)
- Mobile-Ansicht proportionally adjusted via Mantine's responsive modal sizing
- All 1795 tests passing

### 6. Badge für Passkey-Login Nutzer (feature)
- Added new badge "Passkey Pionier" (key: special_passkey_pioneer) in badge-definitions.json
  - Category: SPECIAL, Rarity: SILVER
  - Requirement: User has at least one passkey registered
- Created awardSecurityBadges() function in badge-service.ts that checks Authenticator count
- Integrated security badges into checkAndAwardBadges() for automatic badge awarding
- Added 2 new tests in badge-service.test.ts:
  - Test: awards passkey pioneer badge when user has registered a passkey
  - Test: does not award passkey pioneer badge when user has no passkeys
- Badge will appear in badge overview automatically once a user registers a passkey
- All 1710 tests passing

### 7. Setting für Animationen deaktivieren (feature)
- Added new database field `animationsEnabled: Boolean @default(true)` to User model in Prisma schema
- Created new API endpoint `/api/users/me/preferences` with GET and PATCH methods
- Extended `userResponseSchema` and `UserForBroadcast` to include `animationsEnabled`
- Updated `useUserStore` interface to include `animationsEnabled` property
- Enhanced `useReducedMotion` hook to check both OS preference AND user setting:
  - Returns true if OS prefers-reduced-motion is set
  - Returns true if user has explicitly disabled animations (animationsEnabled === false)
  - All existing components using useReducedMotion() automatically respect the new setting
- Created `UserPreferencesSection` component with toggle button in profile page
- Added apiClient method `user.preferences.update()` for frontend-backend communication
- SSE broadcasts `user:updated` event when preference changes for real-time sync
- Added comprehensive test suite:
  - 10 tests in route.test.ts for preferences API endpoint
  - 6 additional tests in useReducedMotion.test.ts for user setting integration
- All 1725 tests passing
- npm run lint shows 0 warnings

### 8. Connection Indicator wieder sichtbar machen (bugfix)
- SSEStatusIndicator war nur für Admin-Benutzer sichtbar (isAdmin && ...)
- Entfernt die Admin-Einschränkung in Header.tsx (Zeile 130-135)
- SSEStatusIndicator wird jetzt für alle eingeloggten Benutzer auf Desktop angezeigt
- SSEStatusIndicator auch zum mobilen Menü hinzugefügt (im User Info Bereich)
- Entfernt unbenutzte `isAdmin` Variable
- Alle 1820 Tests bestanden
- npm run lint zeigt 0 Warnungen
