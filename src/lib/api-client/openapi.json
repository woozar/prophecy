{
  "openapi": "3.0.3",
  "info": {
    "title": "Prophezeiung API",
    "version": "1.0.0",
    "description": "API for the Prophezeiung prediction platform"
  },
  "servers": [
    {
      "url": "http://localhost:3001",
      "description": "Development"
    }
  ],
  "security": [
    {
      "cookieAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "session",
        "description": "Session cookie authentication using JWT"
      }
    },
    "schemas": {
      "Role": {
        "type": "string",
        "enum": ["USER", "ADMIN"]
      },
      "UserStatus": {
        "type": "string",
        "enum": ["PENDING", "APPROVED", "SUSPENDED", "REJECTED"]
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true
          },
          "avatarEffect": {
            "type": "string",
            "nullable": true
          },
          "avatarEffectColors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "role": {
            "$ref": "#/components/schemas/Role"
          },
          "status": {
            "$ref": "#/components/schemas/UserStatus"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "_count": {
            "type": "object",
            "properties": {
              "prophecies": {
                "type": "number"
              },
              "ratings": {
                "type": "number"
              }
            },
            "required": ["prophecies", "ratings"]
          }
        },
        "required": [
          "id",
          "username",
          "displayName",
          "avatarUrl",
          "avatarEffect",
          "avatarEffectColors",
          "role",
          "status",
          "createdAt"
        ]
      },
      "UsersListResponse": {
        "type": "object",
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            }
          }
        },
        "required": ["users"]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          }
        },
        "required": ["error"]
      },
      "UpdateUserRequest": {
        "type": "object",
        "properties": {
          "status": {
            "$ref": "#/components/schemas/UserStatus"
          },
          "role": {
            "$ref": "#/components/schemas/Role"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "enum": [true]
          }
        },
        "required": ["success"]
      },
      "ResetPasswordResponse": {
        "type": "object",
        "properties": {
          "temporaryPassword": {
            "type": "string"
          }
        },
        "required": ["temporaryPassword"]
      },
      "BotRatingsResult": {
        "type": "object",
        "properties": {
          "botId": {
            "type": "string"
          },
          "botName": {
            "type": "string"
          },
          "ratingsCreated": {
            "type": "number"
          }
        },
        "required": ["botId", "botName", "ratingsCreated"]
      },
      "BotRatingsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "result": {
            "type": "object",
            "properties": {
              "totalRatingsCreated": {
                "type": "number"
              },
              "bots": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/BotRatingsResult"
                }
              }
            },
            "required": ["totalRatingsCreated", "bots"]
          }
        },
        "required": ["success", "message", "result"]
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "username": {
                "type": "string"
              },
              "displayName": {
                "type": "string",
                "nullable": true
              },
              "role": {
                "$ref": "#/components/schemas/Role"
              },
              "avatarUrl": {
                "type": "string",
                "nullable": true
              },
              "avatarEffect": {
                "type": "string",
                "nullable": true
              },
              "avatarEffectColors": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "id",
              "username",
              "displayName",
              "role",
              "avatarUrl",
              "avatarEffect",
              "avatarEffectColors"
            ]
          },
          "forcePasswordChange": {
            "type": "boolean"
          }
        },
        "required": ["user"]
      },
      "PasswordLoginRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "minLength": 1
          },
          "password": {
            "type": "string",
            "minLength": 1
          }
        },
        "required": ["username", "password"]
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "username": {
                "type": "string"
              },
              "displayName": {
                "type": "string",
                "nullable": true
              },
              "status": {
                "type": "string",
                "enum": ["PENDING"]
              }
            },
            "required": ["id", "username", "displayName", "status"]
          },
          "message": {
            "type": "string"
          }
        },
        "required": ["user", "message"]
      },
      "RegisterPasswordRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "minLength": 3
          },
          "password": {
            "type": "string",
            "minLength": 8
          },
          "displayName": {
            "type": "string"
          }
        },
        "required": ["username", "password"]
      },
      "ChangePasswordRequest": {
        "type": "object",
        "properties": {
          "currentPassword": {
            "type": "string"
          },
          "newPassword": {
            "type": "string",
            "minLength": 8
          },
          "confirmPassword": {
            "type": "string"
          }
        },
        "required": ["newPassword", "confirmPassword"]
      },
      "WebAuthnLoginOptionsResponse": {
        "type": "object",
        "properties": {
          "options": {
            "type": "object",
            "properties": {
              "challenge": {
                "type": "string"
              },
              "timeout": {
                "type": "number"
              },
              "rpId": {
                "type": "string"
              },
              "allowCredentials": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": ["public-key"]
                    },
                    "transports": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": ["id", "type"]
                }
              },
              "userVerification": {
                "type": "string"
              }
            },
            "required": ["challenge"]
          },
          "challengeKey": {
            "type": "string"
          }
        },
        "required": ["options", "challengeKey"]
      },
      "WebAuthnLoginOptionsRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string"
          }
        }
      },
      "WebAuthnLoginVerifyRequest": {
        "type": "object",
        "properties": {
          "credential": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "rawId": {
                "type": "string"
              },
              "response": {
                "type": "object",
                "properties": {
                  "authenticatorData": {
                    "type": "string"
                  },
                  "clientDataJSON": {
                    "type": "string"
                  },
                  "signature": {
                    "type": "string"
                  },
                  "userHandle": {
                    "type": "string",
                    "nullable": true
                  }
                },
                "required": ["authenticatorData", "clientDataJSON", "signature"]
              },
              "authenticatorAttachment": {
                "type": "string",
                "nullable": true
              },
              "clientExtensionResults": {
                "type": "object",
                "additionalProperties": {
                  "nullable": true
                }
              },
              "type": {
                "type": "string",
                "enum": ["public-key"]
              }
            },
            "required": ["id", "response", "clientExtensionResults", "type"]
          },
          "challengeKey": {
            "type": "string"
          }
        },
        "required": ["credential", "challengeKey"]
      },
      "WebAuthnRegisterOptionsResponse": {
        "type": "object",
        "properties": {
          "options": {
            "type": "object",
            "properties": {
              "challenge": {
                "type": "string"
              },
              "rp": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "id": {
                    "type": "string"
                  }
                },
                "required": ["name"]
              },
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "displayName": {
                    "type": "string"
                  }
                },
                "required": ["id", "name", "displayName"]
              },
              "pubKeyCredParams": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["public-key"]
                    },
                    "alg": {
                      "type": "number"
                    }
                  },
                  "required": ["type", "alg"]
                }
              },
              "timeout": {
                "type": "number"
              },
              "authenticatorSelection": {
                "type": "object",
                "properties": {
                  "authenticatorAttachment": {
                    "type": "string"
                  },
                  "requireResidentKey": {
                    "type": "boolean"
                  },
                  "residentKey": {
                    "type": "string"
                  },
                  "userVerification": {
                    "type": "string"
                  }
                }
              },
              "attestation": {
                "type": "string"
              },
              "excludeCredentials": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string",
                      "enum": ["public-key"]
                    },
                    "transports": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": ["id", "type"]
                }
              }
            },
            "required": ["challenge", "rp", "user", "pubKeyCredParams"]
          },
          "tempUserId": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "displayName": {
            "type": "string"
          }
        },
        "required": ["options", "tempUserId", "username", "displayName"]
      },
      "WebAuthnRegisterOptionsRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "minLength": 3
          },
          "displayName": {
            "type": "string"
          }
        },
        "required": ["username"]
      },
      "WebAuthnRegisterVerifyRequest": {
        "type": "object",
        "properties": {
          "credential": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "rawId": {
                "type": "string"
              },
              "response": {
                "type": "object",
                "properties": {
                  "clientDataJSON": {
                    "type": "string"
                  },
                  "attestationObject": {
                    "type": "string"
                  },
                  "transports": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "publicKeyAlgorithm": {
                    "type": "number"
                  },
                  "publicKey": {
                    "type": "string"
                  },
                  "authenticatorData": {
                    "type": "string"
                  }
                },
                "required": ["clientDataJSON", "attestationObject"]
              },
              "authenticatorAttachment": {
                "type": "string",
                "nullable": true
              },
              "clientExtensionResults": {
                "type": "object",
                "additionalProperties": {
                  "nullable": true
                }
              },
              "type": {
                "type": "string",
                "enum": ["public-key"]
              }
            },
            "required": ["id", "response", "clientExtensionResults", "type"]
          },
          "tempUserId": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "displayName": {
            "type": "string"
          }
        },
        "required": ["credential", "tempUserId", "username", "displayName"]
      },
      "InitialDataUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true
          },
          "avatarEffect": {
            "type": "string",
            "nullable": true
          },
          "avatarEffectColors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "role": {
            "$ref": "#/components/schemas/Role"
          },
          "status": {
            "$ref": "#/components/schemas/UserStatus"
          },
          "isBot": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "badgeIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "_count": {
            "type": "object",
            "properties": {
              "prophecies": {
                "type": "number"
              },
              "ratings": {
                "type": "number"
              }
            },
            "required": ["prophecies", "ratings"]
          }
        },
        "required": [
          "id",
          "username",
          "displayName",
          "avatarUrl",
          "avatarEffect",
          "avatarEffectColors",
          "role",
          "status",
          "isBot",
          "createdAt",
          "badgeIds",
          "_count"
        ]
      },
      "Round": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "submissionDeadline": {
            "type": "string",
            "format": "date-time"
          },
          "ratingDeadline": {
            "type": "string",
            "format": "date-time"
          },
          "fulfillmentDate": {
            "type": "string",
            "format": "date-time"
          },
          "resultsPublishedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "_count": {
            "type": "object",
            "properties": {
              "prophecies": {
                "type": "number"
              }
            },
            "required": ["prophecies"]
          }
        },
        "required": [
          "id",
          "title",
          "submissionDeadline",
          "ratingDeadline",
          "fulfillmentDate",
          "resultsPublishedAt",
          "createdAt"
        ]
      },
      "Prophecy": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "creatorId": {
            "type": "string"
          },
          "roundId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "fulfilled": {
            "type": "boolean",
            "nullable": true
          },
          "resolvedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          }
        },
        "required": [
          "id",
          "title",
          "description",
          "creatorId",
          "roundId",
          "createdAt",
          "fulfilled",
          "resolvedAt"
        ]
      },
      "Rating": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "value": {
            "type": "number"
          },
          "prophecyId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "value", "prophecyId", "userId", "createdAt"]
      },
      "BadgeCategory": {
        "type": "string",
        "enum": [
          "CREATOR",
          "ACCURACY",
          "RATER",
          "RATER_ACC",
          "ROUNDS",
          "LEADERBOARD",
          "SPECIAL",
          "SOCIAL",
          "HIDDEN"
        ]
      },
      "BadgeRarity": {
        "type": "string",
        "enum": ["BRONZE", "SILVER", "GOLD", "LEGENDARY"]
      },
      "Badge": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "key": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "requirement": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "category": {
            "$ref": "#/components/schemas/BadgeCategory"
          },
          "rarity": {
            "$ref": "#/components/schemas/BadgeRarity"
          },
          "threshold": {
            "type": "number",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "id",
          "key",
          "name",
          "description",
          "requirement",
          "icon",
          "category",
          "rarity",
          "threshold",
          "createdAt"
        ]
      },
      "UserBadge": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "badgeId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "earnedAt": {
            "type": "string",
            "format": "date-time"
          },
          "badge": {
            "$ref": "#/components/schemas/Badge"
          }
        },
        "required": ["id", "badgeId", "userId", "earnedAt", "badge"]
      },
      "UserBadgeSimple": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string"
          },
          "badgeId": {
            "type": "string"
          },
          "earnedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["userId", "badgeId", "earnedAt"]
      },
      "InitialDataResponse": {
        "type": "object",
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InitialDataUser"
            }
          },
          "rounds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Round"
            }
          },
          "prophecies": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Prophecy"
            }
          },
          "ratings": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Rating"
            }
          },
          "badges": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Badge"
            }
          },
          "myBadges": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserBadge"
            }
          },
          "allUserBadges": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserBadgeSimple"
            }
          },
          "currentUserId": {
            "type": "string"
          }
        },
        "required": [
          "users",
          "rounds",
          "prophecies",
          "ratings",
          "badges",
          "myBadges",
          "allUserBadges",
          "currentUserId"
        ]
      },
      "PropheciesListResponse": {
        "type": "object",
        "properties": {
          "prophecies": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Prophecy"
            }
          }
        },
        "required": ["prophecies"]
      },
      "ProphecyDetailResponse": {
        "type": "object",
        "properties": {
          "prophecy": {
            "$ref": "#/components/schemas/Prophecy"
          }
        },
        "required": ["prophecy"]
      },
      "CreateProphecyRequest": {
        "type": "object",
        "properties": {
          "roundId": {
            "type": "string",
            "minLength": 1
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "default": ""
          }
        },
        "required": ["roundId", "title"]
      },
      "UpdateProphecyRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "default": ""
          }
        },
        "required": ["title"]
      },
      "RateRequest": {
        "type": "object",
        "properties": {
          "value": {
            "type": "integer",
            "minimum": -10,
            "maximum": 10
          }
        },
        "required": ["value"]
      },
      "ResolveRequest": {
        "type": "object",
        "properties": {
          "fulfilled": {
            "type": "boolean"
          }
        },
        "required": ["fulfilled"]
      },
      "AuditLogEntityType": {
        "type": "string",
        "enum": ["RATING", "PROPHECY"]
      },
      "AuditLogAction": {
        "type": "string",
        "enum": ["CREATE", "UPDATE", "DELETE", "BULK_DELETE"]
      },
      "AuditLog": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "entityType": {
            "$ref": "#/components/schemas/AuditLogEntityType"
          },
          "entityId": {
            "type": "string"
          },
          "action": {
            "$ref": "#/components/schemas/AuditLogAction"
          },
          "prophecyId": {
            "type": "string",
            "nullable": true
          },
          "userId": {
            "type": "string"
          },
          "oldValue": {
            "type": "string",
            "nullable": true
          },
          "newValue": {
            "type": "string",
            "nullable": true
          },
          "context": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "username": {
                "type": "string"
              },
              "displayName": {
                "type": "string",
                "nullable": true
              }
            },
            "required": ["id", "username", "displayName"]
          }
        },
        "required": [
          "id",
          "entityType",
          "entityId",
          "action",
          "prophecyId",
          "userId",
          "oldValue",
          "newValue",
          "context",
          "createdAt",
          "user"
        ]
      },
      "AuditLogsResponse": {
        "type": "object",
        "properties": {
          "auditLogs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AuditLog"
            }
          }
        },
        "required": ["auditLogs"]
      },
      "RoundsListResponse": {
        "type": "object",
        "properties": {
          "rounds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Round"
            }
          }
        },
        "required": ["rounds"]
      },
      "RoundDetailResponse": {
        "type": "object",
        "properties": {
          "round": {
            "$ref": "#/components/schemas/Round"
          }
        },
        "required": ["round"]
      },
      "CreateRoundRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "submissionDeadline": {
            "type": "string",
            "nullable": true
          },
          "ratingDeadline": {
            "type": "string",
            "nullable": true
          },
          "fulfillmentDate": {
            "type": "string",
            "nullable": true
          }
        },
        "required": ["title", "submissionDeadline", "ratingDeadline", "fulfillmentDate"]
      },
      "UpdateRoundRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "submissionDeadline": {
            "type": "string",
            "nullable": true
          },
          "ratingDeadline": {
            "type": "string",
            "nullable": true
          },
          "fulfillmentDate": {
            "type": "string",
            "nullable": true
          }
        },
        "required": ["title", "submissionDeadline", "ratingDeadline", "fulfillmentDate"]
      },
      "RoundStatistics": {
        "type": "object",
        "properties": {
          "roundId": {
            "type": "string"
          },
          "totalProphecies": {
            "type": "number"
          },
          "fulfilledCount": {
            "type": "number"
          },
          "notFulfilledCount": {
            "type": "number"
          },
          "unresolvedCount": {
            "type": "number"
          },
          "averageRating": {
            "type": "number",
            "nullable": true
          },
          "topCreators": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "userId": {
                  "type": "string"
                },
                "username": {
                  "type": "string"
                },
                "displayName": {
                  "type": "string",
                  "nullable": true
                },
                "avatarUrl": {
                  "type": "string",
                  "nullable": true
                },
                "fulfilledCount": {
                  "type": "number"
                },
                "totalCount": {
                  "type": "number"
                },
                "averageRating": {
                  "type": "number",
                  "nullable": true
                }
              },
              "required": [
                "userId",
                "username",
                "displayName",
                "avatarUrl",
                "fulfilledCount",
                "totalCount",
                "averageRating"
              ]
            }
          }
        },
        "required": [
          "roundId",
          "totalProphecies",
          "fulfilledCount",
          "notFulfilledCount",
          "unresolvedCount",
          "averageRating",
          "topCreators"
        ]
      },
      "PasswordLoginStatus": {
        "type": "object",
        "properties": {
          "passwordLoginEnabled": {
            "type": "boolean"
          },
          "forcePasswordChange": {
            "type": "boolean"
          },
          "hasPasskeys": {
            "type": "boolean"
          },
          "canDisablePasswordLogin": {
            "type": "boolean"
          }
        },
        "required": [
          "passwordLoginEnabled",
          "forcePasswordChange",
          "hasPasskeys",
          "canDisablePasswordLogin"
        ]
      },
      "TogglePasswordLoginResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "passwordLoginEnabled": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          }
        },
        "required": ["success", "passwordLoginEnabled", "message"]
      },
      "TogglePasswordLoginRequest": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean"
          }
        },
        "required": ["enabled"]
      },
      "AvatarSettingsResponse": {
        "type": "object",
        "properties": {
          "avatarEffect": {
            "type": "string",
            "nullable": true
          },
          "avatarEffectColors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["avatarEffect", "avatarEffectColors"]
      },
      "UpdateAvatarSettingsRequest": {
        "type": "object",
        "properties": {
          "avatarEffect": {
            "type": "string",
            "enum": ["glow", "particles", "lightning", "halo", "fire", "none"]
          },
          "avatarEffectColors": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["cyan", "teal", "violet", "emerald", "rose", "amber", "blue", "pink"]
            }
          }
        }
      },
      "Passkey": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastUsedAt": {
            "type": "string",
            "nullable": true,
            "format": "date-time"
          }
        },
        "required": ["id", "name", "createdAt", "lastUsedAt"]
      },
      "PasskeysListResponse": {
        "type": "object",
        "properties": {
          "passkeys": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Passkey"
            }
          }
        },
        "required": ["passkeys"]
      }
    },
    "parameters": {}
  },
  "paths": {
    "/api/admin/users": {
      "get": {
        "tags": ["Admin"],
        "summary": "List all users (Admin only)",
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsersListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/users/{id}": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get user details (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "User ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  },
                  "required": ["user"]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Admin"],
        "summary": "Update user status or role (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "User ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  },
                  "required": ["user"]
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Admin"],
        "summary": "Delete user (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "User ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Cannot delete yourself",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/users/{id}/reset-password": {
      "post": {
        "tags": ["Admin"],
        "summary": "Reset user password (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "User ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Password reset",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResetPasswordResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/rounds/{id}/bot-ratings": {
      "post": {
        "tags": ["Admin"],
        "summary": "Trigger bot ratings for a round (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Bot ratings triggered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BotRatingsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Error running bot ratings",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login/password": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login with username and password",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Account not approved or blocked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register/password": {
      "post": {
        "tags": ["Auth"],
        "summary": "Register with username and password",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Registration successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error or username taken",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/change-password": {
      "post": {
        "tags": ["Auth"],
        "summary": "Change password for authenticated user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized or wrong current password",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "Logout and clear session",
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login/options": {
      "post": {
        "tags": ["Auth", "WebAuthn"],
        "summary": "Get WebAuthn authentication options",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebAuthnLoginOptionsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication options",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebAuthnLoginOptionsResponse"
                }
              }
            }
          },
          "400": {
            "description": "No passkey registered",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login/verify": {
      "post": {
        "tags": ["Auth", "WebAuthn"],
        "summary": "Verify WebAuthn authentication response",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebAuthnLoginVerifyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Verification failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Passkey not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register/options": {
      "post": {
        "tags": ["Auth", "WebAuthn"],
        "summary": "Get WebAuthn registration options",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebAuthnRegisterOptionsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Registration options",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebAuthnRegisterOptionsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Username taken",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register/verify": {
      "post": {
        "tags": ["Auth", "WebAuthn"],
        "summary": "Verify WebAuthn registration response",
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebAuthnRegisterVerifyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Registration successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          },
          "400": {
            "description": "Verification failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/initial-data": {
      "get": {
        "tags": ["Data"],
        "summary": "Get all initial data for store hydration",
        "responses": {
          "200": {
            "description": "Initial data for store",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InitialDataResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/prophecies": {
      "get": {
        "tags": ["Prophecies"],
        "summary": "Get prophecies with optional filters",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": false,
            "name": "roundId",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": ["mine", "toRate"]
            },
            "required": false,
            "name": "filter",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "List of prophecies",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PropheciesListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Prophecies"],
        "summary": "Create a new prophecy",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProphecyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Prophecy created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProphecyDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error or submission deadline passed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/prophecies/{id}": {
      "put": {
        "tags": ["Prophecies"],
        "summary": "Update own prophecy",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Prophecy ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProphecyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Prophecy updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProphecyDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error or submission deadline passed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Not your prophecy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Prophecy not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Prophecies"],
        "summary": "Delete own prophecy",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Prophecy ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Prophecy deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Submission deadline passed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Not your prophecy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Prophecy not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/prophecies/{id}/rate": {
      "post": {
        "tags": ["Prophecies"],
        "summary": "Rate a prophecy (-10 to +10)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Prophecy ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rating saved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "prophecy": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true
                        },
                        "creatorId": {
                          "type": "string"
                        },
                        "roundId": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string"
                        },
                        "fulfilled": {
                          "type": "boolean",
                          "nullable": true
                        },
                        "resolvedAt": {
                          "type": "string",
                          "nullable": true
                        }
                      },
                      "required": [
                        "id",
                        "title",
                        "description",
                        "creatorId",
                        "roundId",
                        "createdAt",
                        "fulfilled",
                        "resolvedAt"
                      ]
                    },
                    "rating": {
                      "$ref": "#/components/schemas/Rating"
                    }
                  },
                  "required": ["prophecy", "rating"]
                }
              }
            }
          },
          "400": {
            "description": "Invalid rating or cannot rate own prophecy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Prophecy not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/prophecies/{id}/resolve": {
      "post": {
        "tags": ["Prophecies"],
        "summary": "Mark prophecy as fulfilled or not (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Prophecy ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Prophecy resolved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProphecyDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Rating phase not ended yet",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Prophecy not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/prophecies/{id}/audit": {
      "get": {
        "tags": ["Prophecies"],
        "summary": "Get audit logs for a prophecy",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Prophecy ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Audit logs for the prophecy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuditLogsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Prophecy not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rounds": {
      "get": {
        "tags": ["Rounds"],
        "summary": "Get all rounds",
        "responses": {
          "200": {
            "description": "List of rounds",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoundsListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Rounds"],
        "summary": "Create a new round (Admin only)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoundRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Round created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoundDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rounds/{id}": {
      "get": {
        "tags": ["Rounds"],
        "summary": "Get round details",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Round details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoundDetailResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Rounds"],
        "summary": "Update round (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRoundRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Round updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoundDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Rounds"],
        "summary": "Delete round (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Round deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rounds/{id}/statistics": {
      "get": {
        "tags": ["Rounds"],
        "summary": "Get round statistics",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Round statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoundStatistics"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rounds/{id}/publish-results": {
      "post": {
        "tags": ["Rounds"],
        "summary": "Publish round results (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Results published",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoundDetailResponse"
                }
              }
            }
          },
          "400": {
            "description": "Rating phase not ended",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Rounds"],
        "summary": "Unpublish round results (Admin only)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Results unpublished",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rounds/{id}/export": {
      "get": {
        "tags": ["Rounds"],
        "summary": "Export round as Excel file (Admin only)",
        "description": "Downloads an Excel file with two sheets: Prophezeiungen (prophecies with statistics) and Bewertungen (individual ratings with usernames)",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "Round ID"
            },
            "required": true,
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Excel file download",
            "content": {
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not admin)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Round not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me/password-login": {
      "get": {
        "tags": ["User"],
        "summary": "Get password login status",
        "responses": {
          "200": {
            "description": "Password login status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PasswordLoginStatus"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["User"],
        "summary": "Toggle password login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TogglePasswordLoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password login toggled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TogglePasswordLoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Cannot disable without passkey",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me/avatar": {
      "post": {
        "tags": ["User"],
        "summary": "Upload avatar image",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "avatar": {
                    "type": "string",
                    "description": "Avatar image file (JPEG, PNG, WebP, GIF, max 5MB)",
                    "format": "binary"
                  }
                },
                "required": ["avatar"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Avatar uploaded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "avatarUrl": {
                      "type": "string"
                    }
                  },
                  "required": ["avatarUrl"]
                }
              }
            }
          },
          "400": {
            "description": "Invalid file",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["User"],
        "summary": "Delete avatar image",
        "responses": {
          "200": {
            "description": "Avatar deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me/avatar-settings": {
      "patch": {
        "tags": ["User"],
        "summary": "Update avatar effect settings",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAvatarSettingsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Avatar settings updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AvatarSettingsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid settings",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me/passkeys": {
      "get": {
        "tags": ["User", "WebAuthn"],
        "summary": "List user passkeys",
        "responses": {
          "200": {
            "description": "List of passkeys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PasskeysListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["User", "WebAuthn"],
        "summary": "Register new passkey (get options)",
        "responses": {
          "200": {
            "description": "Registration options",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "options": {
                      "type": "object",
                      "additionalProperties": {
                        "nullable": true
                      }
                    }
                  },
                  "required": ["options"]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["User", "WebAuthn"],
        "summary": "Rename passkey",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "required": ["id", "name"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Passkey renamed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "ID and name required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Passkey not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["User", "WebAuthn"],
        "summary": "Delete passkey",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  }
                },
                "required": ["id"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Passkey deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "passkeys": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Passkey"
                      }
                    }
                  },
                  "required": ["passkeys"]
                }
              }
            }
          },
          "400": {
            "description": "Cannot delete last authentication method",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  }
}
